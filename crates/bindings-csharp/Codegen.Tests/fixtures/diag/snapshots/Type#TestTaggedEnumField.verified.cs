//HintName: TestTaggedEnumField.cs
// <auto-generated />
#nullable enable

partial record TestTaggedEnumField : System.IEquatable<TestTaggedEnumField>
{
    private TestTaggedEnumField() { }

    internal enum @enum : byte
    {
        X,
        Y
    }

    public sealed record X(int X_) : TestTaggedEnumField
    {
        public override string ToString() =>
            $"X({SpacetimeDB.BSATN.StringUtil.GenericToString(X_)})";
    }

    public sealed record Y(int Y_) : TestTaggedEnumField
    {
        public override string ToString() =>
            $"Y({SpacetimeDB.BSATN.StringUtil.GenericToString(Y_)})";
    }

    public readonly partial struct BSATN : SpacetimeDB.BSATN.IReadWrite<TestTaggedEnumField>
    {
        internal static readonly SpacetimeDB.BSATN.Enum<@enum> __enumTagRW = new();
        internal static readonly SpacetimeDB.BSATN.I32 XRW = new();
        internal static readonly SpacetimeDB.BSATN.I32 YRW = new();

        public TestTaggedEnumField Read(System.IO.BinaryReader reader) =>
            __enumTagRW.Read(reader) switch
            {
                @enum.X => new X(XRW.Read(reader)),
                @enum.Y => new Y(YRW.Read(reader)),
                _
                    => throw new System.InvalidOperationException(
                        "Invalid tag value, this state should be unreachable."
                    )
            };

        public void Write(System.IO.BinaryWriter writer, TestTaggedEnumField value)
        {
            switch (value)
            {
                case X(var inner):
                    __enumTagRW.Write(writer, @enum.X);
                    XRW.Write(writer, inner);
                    break;
                case Y(var inner):
                    __enumTagRW.Write(writer, @enum.Y);
                    YRW.Write(writer, inner);
                    break;
            }
        }

        public SpacetimeDB.BSATN.AlgebraicType.Ref GetAlgebraicType(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) =>
            registrar.RegisterType<TestTaggedEnumField>(
                _ => new SpacetimeDB.BSATN.AlgebraicType.Sum(
                    new SpacetimeDB.BSATN.AggregateElement[]
                    {
                        new("X", XRW.GetAlgebraicType(registrar)),
                        new("Y", YRW.GetAlgebraicType(registrar))
                    }
                )
            );

        SpacetimeDB.BSATN.AlgebraicType SpacetimeDB.BSATN.IReadWrite<TestTaggedEnumField>.GetAlgebraicType(
            SpacetimeDB.BSATN.ITypeRegistrar registrar
        ) => GetAlgebraicType(registrar);
    }

    public override int GetHashCode()
    {
        switch (this)
        {
            case X(var inner):
                return inner.GetHashCode();
            case Y(var inner):
                return inner.GetHashCode();
            default:
                return 0;
        }
    }
} // TestTaggedEnumField
